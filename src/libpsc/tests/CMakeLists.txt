
macro(add_psc_test name)
  if(GTEST_FOUND)
    add_executable(${name} ${name}.cxx)
    target_link_libraries(${name} psc GTest::GTest GTest::Main)
    gtest_discover_tests(${name})
  endif()
endmacro()

add_psc_test(vec3_unittest)
add_psc_test(test_grid)
add_psc_test(test_rng)
add_psc_test(test_mparticles_cuda)
add_psc_test(test_mparticles)
add_psc_test(test_mfields)
add_psc_test(test_bnd)
add_psc_test(test_push_particles)
add_psc_test(test_push_particles_2)
add_psc_test(test_push_fields)
add_psc_test(test_moments)
add_psc_test(test_collision)
add_psc_test(test_inject)
